# 文件上传问题 - 快速解决方案

## 问题
上传文件时出现 500 错误：
- `GitHub API error: path cannot start with a slash`
- `GitHub API error: Not Found`

## 原因
1. **双重 Base64 编码** - 后端对已编码的内容再次编码
2. **路径前导斜杠** - Gin 的 `*path` 参数包含 `/`，但 GitHub API 不接受

## 已修复的文件
1. ✅ `git-net-disk/internal/github/github.go` - 移除双重编码
2. ✅ `git-net-disk/api/files.go` - 所有方法添加路径清理

## 下一步操作
**重启后端服务即可**

```bash
# 停止当前运行的后端（Ctrl+C）
# 然后重新启动
cd git-net-disk
go run main.go
```

## 验证
上传文件后，后端日志应该显示：
```
[DEBUG] CreateOrUpdateFile API - owner: xxx repo: xxx path: folder/file.txt
[DEBUG] Request - Message: Upload file.txt via GitNetDisk Content length: xxxx Branch: 
[DEBUG] CreateOrUpdateFile - owner: xxx, repo: xxx, path: folder/file.txt
[DEBUG] Sending Authorization header to GitHub: token ghp_xxx
```

如果看到这些日志且没有错误，说明修复成功！
